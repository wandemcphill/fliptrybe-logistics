{% extends "base.html" %}
{% block content %}
<div class="max-w-5xl mx-auto px-6 py-20 animate-in fade-in slide-in-from-bottom-10 duration-700">
    
    <div class="bg-white border border-gray-100 rounded-[3.5rem] overflow-hidden shadow-2xl shadow-gray-200/50">
        
        <div class="bg-zinc-900 p-12 text-white flex flex-col md:flex-row items-center justify-between gap-8 relative overflow-hidden">
            <div class="absolute -top-24 -right-24 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl"></div>
            
            <div class="flex items-center gap-8 relative z-10">
                <div class="relative group">
                    <div class="w-28 h-28 rounded-[2.5rem] overflow-hidden border-4 border-white/10 shadow-2xl transition-transform duration-500 group-hover:scale-105">
                        <img src="{{ url_for('static', filename='uploads/' + current_user.image_file) }}" class="w-full h-full object-cover">
                    </div>
                    <div class="absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl flex items-center justify-center border-4 border-zinc-900 shadow-xl
                        {% if current_user.kyc_status == 'Verified' %} bg-emerald-500
                        {% elif current_user.kyc_status == 'Pending' %} bg-indigo-500
                        {% else %} bg-rose-500 {% endif %}" 
                        title="Status: {{ current_user.kyc_status }}">
                        <i class="fas {% if current_user.kyc_status == 'Verified' %}fa-check{% elif current_user.kyc_status == 'Pending' %}fa-clock{% else %}fa-exclamation{% endif %} text-white text-xs"></i>
                    </div>
                </div>
                <div>
                    <h1 class="text-3xl font-black tracking-tighter">{{ current_user.name }}</h1>
                    <p class="text-[10px] font-black text-zinc-500 uppercase tracking-[0.3em] mt-1">{{ current_user.role }} Node // {{ current_user.username }}</p>
                    <div class="mt-4 flex gap-2">
                        <span class="px-4 py-1.5 bg-white/5 border border-white/10 rounded-xl text-[8px] font-black uppercase tracking-widest text-zinc-400">
                            ID: FT-{{ current_user.id + 1000 }}
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="flex flex-col items-end text-right relative z-10">
                <p class="text-[10px] font-black text-zinc-500 uppercase tracking-widest mb-1">Escrow Credibility</p>
                <div class="text-4xl font-black tracking-tighter text-white">100<span class="text-indigo-500">%</span></div>
            </div>
        </div>

        <div class="p-12">
            <form action="{{ url_for('main.submit_kyc') }}" method="POST" enctype="multipart/form-data" class="mb-20">
                <div class="space-y-8 bg-gray-50/50 p-10 rounded-[3rem] border border-dashed border-gray-200">
                    <div class="flex items-center gap-4">
                        <span class="text-[10px] font-black text-indigo-500 uppercase tracking-[0.3em]">00 // Surveillance & KYC</span>
                        <div class="flex-grow h-[1px] bg-gray-200"></div>
                        <span class="text-[8px] font-black px-3 py-1 bg-white border border-gray-200 rounded-lg text-gray-400 uppercase">{{ current_user.kyc_status }}</span>
                    </div>

                    <p class="text-[11px] text-gray-400 font-medium max-w-xl">To unlock high-value handshakes and the Verified Badge, transmit your 3-point identity signal. Files are encrypted and stored in the Trybe Vault.</p>

                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="space-y-3">
                            <label class="block text-[9px] font-black uppercase text-gray-500 tracking-widest ml-1">Live Selfie</label>
                            <label class="flex flex-col items-center justify-center w-full h-32 bg-white border-2 border-dashed border-gray-200 rounded-3xl cursor-pointer hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group">
                                <i class="fas fa-camera text-gray-300 group-hover:text-indigo-500 transition-colors"></i>
                                <input type="file" name="kyc_selfie" class="hidden" accept="image/*">
                            </label>
                        </div>
                        <div class="space-y-3">
                            <label class="block text-[9px] font-black uppercase text-gray-500 tracking-widest ml-1">Government ID</label>
                            <label class="flex flex-col items-center justify-center w-full h-32 bg-white border-2 border-dashed border-gray-200 rounded-3xl cursor-pointer hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group">
                                <i class="fas fa-id-card text-gray-300 group-hover:text-indigo-500 transition-colors"></i>
                                <input type="file" name="kyc_id" class="hidden" accept="image/*">
                            </label>
                        </div>
                        <div class="space-y-3">
                            <label class="block text-[9px] font-black uppercase text-gray-500 tracking-widest ml-1">Motion Signal (Video)</label>
                            <label class="flex flex-col items-center justify-center w-full h-32 bg-white border-2 border-dashed border-gray-200 rounded-3xl cursor-pointer hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group">
                                <i class="fas fa-video text-gray-300 group-hover:text-indigo-500 transition-colors"></i>
                                <input type="file" name="kyc_video" class="hidden" accept="video/*">
                            </label>
                        </div>
                    </div>
                    <button type="submit" class="w-full py-4 bg-indigo-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all shadow-xl">Transmit Identity Signals</button>
                </div>
            </form>

            <form action="{{ url_for('main.settings') }}" method="POST" enctype="multipart/form-data" class="space-y-16">
                <div class="space-y-8">
                    <div class="flex items-center gap-4">
                        <span class="text-[10px] font-black text-gray-400 uppercase tracking-[0.3em]">01 // Identity Port</span>
                        <div class="flex-grow h-[1px] bg-gray-100"></div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-10">
                        <div class="group">
                            <label class="block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest">Full Legal Name</label>
                            <input type="text" name="name" value="{{ current_user.name }}" required
                                   class="w-full bg-gray-50 border border-gray-100 rounded-2xl px-6 py-4 font-bold text-gray-900 focus:bg-white focus:ring-4 focus:ring-indigo-500/5 outline-none transition-all">
                        </div>
                        <div class="group">
                            <label class="block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest">Primary Signal (Phone)</label>
                            <input type="tel" name="phone" value="{{ current_user.phone or '' }}" required
                                   class="w-full bg-gray-50 border border-gray-100 rounded-2xl px-6 py-4 font-bold text-gray-900 focus:bg-white focus:ring-4 focus:ring-indigo-500/5 outline-none transition-all">
                        </div>
                    </div>
                </div>

                {% if current_user.is_driver %}
                <div class="space-y-8">
                    <div class="flex items-center gap-4">
                        <span class="text-[10px] font-black text-indigo-500 uppercase tracking-[0.3em]">02 // Fleet Intelligence</span>
                        <div class="flex-grow h-[1px] bg-gray-100"></div>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-10">
                        <div class="group">
                            <label class="block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest">Vehicle Type</label>
                            <input type="text" name="vehicle_type" value="{{ current_user.vehicle_type or '' }}" placeholder="Toyota Corolla"
                                   class="w-full bg-gray-50 border border-gray-100 rounded-2xl px-6 py-4 font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none transition">
                        </div>
                        <div class="group">
                            <label class="block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest">Year</label>
                            <input type="text" name="vehicle_year" value="{{ current_user.vehicle_year or '' }}" placeholder="2022"
                                   class="w-full bg-gray-50 border border-gray-100 rounded-2xl px-6 py-4 font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none transition">
                        </div>
                        <div class="group">
                            <label class="block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest">License Plate</label>
                            <input type="text" name="license_plate" value="{{ current_user.license_plate or '' }}" placeholder="LAG-123-FT"
                                   class="w-full bg-gray-50 border border-gray-100 rounded-2xl px-6 py-4 font-bold text-gray-900 focus:ring-2 focus:ring-black outline-none transition">
                        </div>
                    </div>
                </div>
                {% endif %}

                <div class="space-y-8">
                    <div class="flex items-center gap-4">
                        <span class="text-[10px] font-black text-rose-500 uppercase tracking-[0.3em]">03 // Authentication Crypt</span>
                        <div class="flex-grow h-[1px] bg-gray-100"></div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-10">
                        <div class="group">
                            <label class="block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest">Update Identity Photo</label>
                            <label class="flex flex-col items-center justify-center w-full h-32 bg-gray-50 border-2 border-dashed border-gray-200 rounded-3xl cursor-pointer hover:bg-gray-100 transition-all group">
                                <i class="fas fa-image text-gray-300 group-hover:text-black transition"></i>
                                <input type="file" name="profile_pic" class="hidden" accept="image/*">
                            </label>
                        </div>
                        <div class="group">
                            <label class="block text-[10px] font-black uppercase text-gray-400 mb-3 tracking-widest">New Security Key</label>
                            <input type="password" name="password" placeholder="••••••••"
                                   class="w-full bg-gray-50 border border-gray-100 rounded-3xl px-6 py-4 font-bold text-gray-900 focus:ring-2 focus:ring-rose-500 outline-none transition">
                        </div>
                    </div>
                </div>

                <div class="pt-10 flex flex-col md:flex-row items-center justify-between border-t border-gray-50 gap-8">
                    <p class="text-[10px] text-gray-400 font-black uppercase tracking-widest">Syncing Identity across FlipTrybe Nodes...</p>
                    <button type="submit" class="w-full md:w-auto bg-black text-white px-12 py-5 rounded-[2rem] font-black text-[11px] uppercase tracking-[0.3em] hover:bg-indigo-600 transition-all duration-500 shadow-2xl active:scale-95">
                        Synchronize Account
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}