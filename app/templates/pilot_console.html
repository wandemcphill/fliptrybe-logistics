{% extends "base.html" %}
{% block content %}
<div class="max-w-5xl mx-auto px-6 py-20">
    <div class="mb-12">
        <h1 class="text-3xl font-black tracking-tighter">Pilot Cockpit</h1>
        <p class="text-[10px] font-black text-indigo-500 uppercase tracking-widest mt-2">Active Missions</p>
    </div>

    <div class="space-y-6">
        {% for order in deliveries %}
        <div class="bg-zinc-900 text-white p-8 rounded-[2.5rem] flex flex-col md:flex-row justify-between items-center gap-6 shadow-2xl">
            <div class="flex items-center gap-6">
                <div class="w-20 h-20 bg-zinc-800 rounded-2xl overflow-hidden border border-zinc-700">
                    <img src="{{ url_for('static', filename='uploads/' + order.listing.image_filename) }}" class="w-full h-full object-cover grayscale">
                </div>
                <div>
                    <span class="text-[8px] font-black text-indigo-400 uppercase tracking-widest">{{ order.delivery_status }}</span>
                    <h3 class="text-xl font-black mt-1">{{ order.listing.title }}</h3>
                    <p class="text-[9px] text-zinc-500 uppercase mt-1">To: {{ order.listing.city }}, {{ order.listing.state }}</p>
                </div>
            </div>
            
            <div class="flex gap-4">
                {% if order.delivery_status != 'Delivered' %}
                <form action="{{ url_for('main.update_delivery', order_id=order.id, status='In-Transit') }}" method="POST">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button class="px-6 py-3 bg-white text-black rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-indigo-500 hover:text-white transition-all">In-Transit</button>
                </form>
                <form action="{{ url_for('main.update_delivery', order_id=order.id, status='Delivered') }}" method="POST">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button class="px-6 py-3 bg-emerald-500 text-white rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-emerald-600 transition-all">Delivered</button>
                </form>
                {% else %}
                <span class="text-zinc-500 text-[9px] font-black uppercase border border-zinc-800 px-6 py-3 rounded-xl">Mission Complete</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}