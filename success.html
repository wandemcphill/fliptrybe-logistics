<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver En Route</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #111827; color: white; margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; }
        
        /* THE MAP CONTAINER */
        #map { flex-grow: 1; width: 100%; z-index: 1; }

        /* THE INFO CARD */
        .info-card {
            background: white;
            color: #1F2937;
            padding: 25px;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            z-index: 2;
            position: relative;
            margin-top: -20px; /* Overlap map slightly */
        }

        .driver-info { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
        .driver-img { width: 60px; height: 60px; background: #E5E7EB; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; }
        .text-group h2 { margin: 0; font-size: 18px; }
        .text-group p { margin: 5px 0 0; color: #6B7280; font-size: 14px; }
        
        .eta-badge { background: #10B981; color: white; padding: 5px 12px; border-radius: 12px; font-weight: bold; font-size: 14px; }

        .btn { display: block; width: 100%; padding: 15px; background: #111827; color: white; text-align: center; text-decoration: none; border-radius: 12px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="map"></div>

    <div class="info-card">
        <div class="driver-info">
            <div style="display:flex; align-items:center; gap:15px;">
                <div class="driver-img">üöê</div>
                <div class="text-group">
                    <h2>Chinedu (Cargo Van)</h2>
                    <p>Toyota Hiace ‚Ä¢ LAG-504-KD</p>
                </div>
            </div>
            <div class="eta-badge">5 MIN</div>
        </div>
        
        <p style="color:#6B7280; margin-bottom: 20px;">
            Your driver is navigating through traffic.
        </p>

        <a href="/" class="btn">Book Another Ride</a>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // A. Initialize Map (Focused on Lagos, Nigeria)
        // Coordinates: [Latitude, Longitude]
        const lagosCoords = [6.5244, 3.3792]; 
        const map = L.map('map').setView(lagosCoords, 14);

        // B. Add the "Real Life" Map Tiles (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // C. Create Icons
        const userIcon = L.divIcon({
            html: '<div style="background:#2563EB; width:15px; height:15px; border-radius:50%; border:3px solid white; box-shadow:0 0 10px rgba(0,0,0,0.5);"></div>',
            className: 'custom-div-icon'
        });

        const driverIcon = L.divIcon({
            html: '<div style="font-size:30px;">üöê</div>', // Simple Emoji Icon
            className: 'custom-div-icon',
            iconSize: [30, 30],
            iconAnchor: [15, 15] // Center it
        });

        // D. Place User Marker (Static)
        const userMarker = L.marker(lagosCoords, {icon: userIcon}).addTo(map)
            .bindPopup("You are here").openPopup();

        // E. Place Driver Marker (Starting slightly away)
        let driverLat = 6.5300; 
        let driverLng = 3.3850;
        const driverMarker = L.marker([driverLat, driverLng], {icon: driverIcon}).addTo(map);

        // F. ANIMATION: Make the driver move!
        // This runs every 1 second
        setInterval(() => {
            // Move slightly closer to the user
            driverLat -= 0.0001;
            driverLng -= 0.0001;
            
            // Update marker position
            driverMarker.setLatLng([driverLat, driverLng]);
        }, 1000);

    </script>
</body>
</html>